"use strict";function get(n,t,i){function e(){var n=l(typeof arguments[0]=="boolean"?arguments[0]:!0);return a(n),n}function c(n,f,e){function a(n,i,r,u){var f=l(t.Event(r),n,i);f.feedback=function(i){t.event.trigger(l(t.Event(u),n,i))};t.event.trigger(f)}function l(n,t,i){u._isNonFunction(i);i=i===undefined||i===null?"{}":i;var r=typeof i=="string"||typeof i=="boolean"||typeof i=="number";return n.values=r?i:JSON.stringify(i),n.token_tracer=(n.token_tracer||"")+t,n.token=t,n}var o=r._equalizeeventname(e[0]),c=e[1],h;return u._isString(o),u._NonRecommend_eventname(o),u._isNonFunction(c),h=s(),n.isEnable()&&setTimeout(function(){a(f,c,o,h)},0),i.Observable.fromEvent(t(document),h).filter(function(n){return n.token===f})}function f(n,u){function o(n,i,r,u){function e(n,i,r){var u=r.dom;return(n===undefined||n===null||n.call(u,r))&&(i===undefined||i===null||t(u).is(i))}return u=f(n,u),n.__enabled__&&e(i,r,u)}function f(n,t){var i=t.target.nodeName;t.dom=i==="#document"||i==="HTML"||i==="BODY"?document:t.target;t.values=t.values===undefined||t.values===null?"{}":t.values;try{t.values=JSON.parse(t.values)}catch(r){}return t}var e=r._equalizeeventname(u.eventname);return i.Observable.fromEvent(t(document),e).filter(function(t){return o(n,u.func,u.sourceTarget,t)}).map(function(t){return f(n,t)})}function l(n){var t={};return t.keys={left:37,up:38,right:39,down:40,enter:13,escape:27},t.__token__=""+o(),t.__enabled__=n,t.dispose=function(){v(t)},t.isEnable=function(){return t.__enabled__},t.enable=function(){t.__enabled__=!0},t.disable=function(){t.__enabled__=!1},t.notify=function(){return c(t,t.__token__,arguments)},t}function a(n){function i(n,t){for(var i in t)n[i]=t[i];return n}var t={listen:function(){var t=r._getListenParams(n,arguments);return t.func=function(){return!0},r._assureListen(t),f(n,t)},listenDocument:function(){var t=r._getListenDocumentParams(n,arguments);return t.func=function(){return this.nodeType===9},r._assureListenDocument(t),f(n,t)},listenElement:function(){var t=r._getListenElementParams(n,arguments);return t.func=function(){return this.nodeType===1&&this.nodeType!==9},r._assureListenElement(t),f(n,t)},listenSelf:function(){var t=r._getListenSelfParams(n,arguments);return t.func=function(t){return r._isme(t,n)},r._assureListenSelf(t),f(n,t)},listenOthers:function(){var t=r._getListenOthersParams(n,arguments);return t.func=function(t){return!r._isme(t,n)},r._assureListenOthers(t),f(n,t)}};i(n,t)}function v(){console.error("implementation of dispose() will not do anything.");return}function y(){function r(n,t){return{eventname:t[0],sourceTarget:t[1],func:t[2]}}function u(n,t){return{eventname:t[0]}}function f(n,t){return{eventname:t[0],sourceTarget:t[1]}}function e(n,t){return{eventname:t[0]}}function o(n,t){return{eventname:t[0]}}function s(t){n._assure._isString(t.eventname);t.sourceTarget&&(n._assure._isString(t.sourceTarget),n._assure._NonReservedEventTarget(t.sourceTarget));n._assure._isFunction(t.func)}function h(t){n._assure._isString(t.eventname);n._assure._isFunction(t.func)}function c(t){n._assure._isString(t.eventname);t.sourceTarget&&(n._assure._isString(t.sourceTarget),n._assure._NonReservedEventTarget(t.sourceTarget));n._assure._isFunction(t.func)}function l(t){n._assure._isString(t.eventname);n._assure._isFunction(t.func)}function a(t){n._assure._isString(t.eventname);n._assure._isFunction(t.func)}function v(){var t="",n;t="load,unload,click,dbclick,keydown,keypress,keyup,change,blur,focus,search,select,submit,mousedown,mousemove,mouseout,mouseover,mouseenter,mouseleave,mouseup,mousewheel,copy,cut,paste,abort,afterprint,beforeprint,beforeunload,error,hashchange,message,offline,online,pagehide,pageshow,popstate,resize,storage,contextmenu,input,invalid,reset,scroll,wheel,drag,dragend,dragenter,dragleave,dragover,dragstart,canplay,canplaythrough,cuechange,durationchange,emptied,ended,error,loadeddata,loadstart,pause,play,playing,progress,ratechange,seeked,seeking,stalled,suspend,timeupdate,volumechange,waiting,error,show,toggle";for(n in document)typeof n=="string"&&n.indexOf("on")===0&&(n=n.toLowerCase().substr(2),t.indexOf(n)===-1&&(t=n+","+t));return t}function y(){return{isnotfrom_me:function(n,t){function i(n,t){return n&&n.token_tracer.indexOf(t.__token__)>-1}if(i(n,t))throw Error("circular notification detected.");},_jquery:function(n){if(typeof n=="undefined")throw Error("require jQuery");if(!n(document).on)throw Error("require jQuery. Please load at least jQuery v.1.7.");},_simple_key_pair_object:function(n){function r(n){var t=typeof n;return t==="string"||t==="number"||t==="boolean"}var t=typeof n,i;if(t!=="string"&&t!=="number"&&t!=="boolean")for(i in n)if(!r(n[i]))throw Error("non simple key pair object detected: "+n[i]);},_isBoolean:function(n){var t=typeof n;if(t!=="boolean")throw Error("boolean is expected");},_isString:function(n){var t=typeof n;if(t!=="string")throw Error("string is expected");},_non_circular_messsage:function(n,t){var i=t.token_tracer;if(i&&i.indexOf(n)>-1)throw Error("circular messaging detected");},_Require:function(n,t){if(typeof n=="undefined")throw Error(t);},_NonReservedEventTarget:function(n){for(var r,i=0;i<t.length;i++)if(r=t[i],n===r)throw Error("should not target event to "+r);},_NonRecommend_eventname:function(n){if(i.indexOf(n.toLowerCase())>-1)throw Error("should not use '"+n+"' because of its general use.");},_isNonFunction:function(n){if(typeof n=="function")throw Error("parameter must be non function");},_isFunction:function(n){if(typeof n!="function")throw Error("parameter must be function");}}}var i=v(),t=["document"],n={_isme:function(n,t){return n.token===t.__token__},_equalizeeventname:function(n){return n.replaceAll("_","__").replaceAll(" ","_")},_assure:y(),_getListenParams:r,_getListenDocumentParams:u,_getListenElementParams:f,_getListenSelfParams:e,_getListenOthersParams:o,_assureListen:s,_assureListenDocument:h,_assureListenElement:c,_assureListenSelf:l,_assureListenOthers:a};return n}var r=y(t),u=r._assure;u._jquery(t);var o=function(){var n=1;return function(){return n++}}(),s=function(){var n=1,t="lfjafjklasf"+Date.now();return function(){return t+Date.now()+n++}}(),h=n.loose;return n.loose=e,e.noConflict=function(){return n.loose=h,e},e}String.prototype.replaceAll=String.prototype.replaceAll||function(n,t){var i=this;return i.replace(new RegExp(n,"g"),t)},function(n){var t=this||eval("this");typeof define=="function"&&define.amd?define(["jquery","rx"],function(i,r){return n.call(t,t,i,r)}):typeof module=="object"&&module.exports?module.exports=n(t,require("jquery"),require("rx")):n(t,t.jQuery,t.rx)}(get);